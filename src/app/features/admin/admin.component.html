
<div *ngIf="content" class="container">

  <h1>ADMIN</h1>




  <div *ngIf="showProducts">
  
      <button (click)="OpenCreateFrom()">Add product</button>
      <input type="text" [(ngModel)]="searchTerm" (input)="liveSearch()" placeholder="Search by name">
  
      <table>
          <thead>
              <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Color</th>
                  <th>Price</th>
                  <th>Edit</th>
                  <th>Delete</th>
              </tr>
          </thead>
          <tbody>
              <tr *ngFor="let product of filteredProductList">
                  <td>{{product.productId}}</td>
                  <td>{{product.name}}</td>
                  <td>{{product.color}}</td>
                  <td>{{product.listPrice}}</td>
                  <td> <button class="btn btn-info btn-sm mx-3" (click)="OpenEditForm(product.productId, product)">Edit</button></td>
                  <td><button class="btn btn-danger btn-sm mx-3" (click)="DeleteProduct(product.productId)">Delete</button></td>
              </tr>
          </tbody>
      </table>
  </div>
  
  <!-- PRODUCT CREATE -->
  
  <div *ngIf="showCreateform" class="container">
  
      <h2>Nuovo Prodotto</h2>
      <button  (click)="CloseForms()"><i class="bi bi-x-lg"></i></button>
      <form>
        <div >
          <label for="name">Nome:</label>
          <input type="text" class="form-control" id="name"  #name required>
          <p *ngIf="sameName">Name already exist!</p>
        </div>
        <div >
          <label for="color">Colore:</label>
          <input type="text" class="form-control" id="color"  #color required>
        </div>
        <div >
          <label for="standardCost">Costo Standard:</label>
          <input type="number" class="form-control" id="standardCost"  #stdCost >
        </div>
        <div >
          <label for="listPrice">Prezzo di Listino:</label>
          <input type="number" class="form-control" id="listPrice"  #price >
        </div>
        <div class="form-group">
          <label for="size">Dimensione:</label>
          <input type="text" class="form-control" id="size" placeholder="Inserisci la Dimensione" #size required>
        </div>
        <div class="form-group">
          <label for="weight">Peso:</label>
          <input type="number" class="form-control" id="weight" placeholder="Inserisci il Peso" #weight required>
        </div>
        <div class="form-group">
          <label for="productCategoryId">Categoria Prodotto:</label>
          <select class="form-control" id="productCategoryId" required #category>
              <option *ngFor="let option of categoryOptions" [value]="option.productCategoryID">
                {{ option.name }}</option>
          </select>
      </div>
  
      <div class="form-group">
          <label for="productModelId">Modello Prodotto:</label>
          <select class="form-control" id="productModelId" required #model>
              <option *ngFor="let option of modelOptions" [value]="option.productModelId">{{ option.name }}</option>
          </select>
      </div>
        <button (click)="CreateProduct(name.value,color.value, stdCost.valueAsNumber, price.valueAsNumber , 
                                  size.value, weight.valueAsNumber,+category.value, +model.value)" 
                                  class="btn btn-primary">Crea Prodotto</button>
      </form>
  </div>
  
  <!-- PRODUCT DELETE -->
  <div *ngIf="showDeleteBox" class="container">
    <button  (click)="CloseForms()"><i class="bi bi-x-lg"></i></button>
   DELETE
  </div>
  
  <!-- PRODUCT EDIT -->
  
  <div *ngIf="showEditForm" class="container">
    Edit product
  
    <button  (click)="CloseForms()"><i class="bi bi-x-lg"></i></button>
    <form>
      <div >
        <label for="name">Nome:</label>
        <input type="text" class="form-control" id="name"  #name required>
        <p *ngIf="sameName">Name already exist!</p>
      </div>
      <div >
        <label for="color">Colore:</label>
        <input type="text" class="form-control" id="color"  #color required>
      </div>
      <div >
        <label for="standardCost">Costo Standard:</label>
        <input type="number" class="form-control" id="standardCost"  #stdCost >
      </div>
      <div >
        <label for="listPrice">Prezzo di Listino:</label>
        <input type="number" class="form-control" id="listPrice"  #price >
      </div>
      <div class="form-group">
        <label for="size">Dimensione:</label>
        <input type="text" class="form-control" id="size" placeholder="Inserisci la Dimensione" #size required>
      </div>
      <div class="form-group">
        <label for="weight">Peso:</label>
        <input type="number" class="form-control" id="weight" placeholder="Inserisci il Peso" #weight required>
      </div>
      <div class="form-group">
        <label for="productCategoryId">Categoria Prodotto:</label>
        <select class="form-control" id="productCategoryId" required #category>
            <option *ngFor="let option of categoryOptions" [value]="option.productCategoryID">
              {{ option.name }}</option>
        </select>
    </div>
  
    <div class="form-group">
        <label for="productModelId">Modello Prodotto:</label>
        <select class="form-control" id="productModelId" required #model>
            <option *ngFor="let option of modelOptions" [value]="option.productModelId">{{ option.name }}</option>
        </select>
    </div>
      <button (click)="submitEditForm(name.value,color.value, stdCost.valueAsNumber, price.valueAsNumber , 
      size.value, weight.valueAsNumber,+category.value, +model.value)"
                                class="btn btn-primary">Crea Prodotto</button>
    </form>
  </div>
</div>

<div *ngIf="denegatedAccess">


403 FORBIDDEN
</div>